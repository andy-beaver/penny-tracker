<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penny War Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: auto;
        }
        h1, h2 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ccc;
        }
        input[type="text"], input[type="number"], input[type="color"], input[type="date"] {
            width: 100%;
            padding: 5px;
            margin: 5px 0;
        }
        button {
            padding: 10px 20px;
            margin-top: 10px;
        }
        .team-entry, .coin-entry {
            margin-bottom: 20px;
        }
        .instructions {
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Penny War Tracker</h1>

    <div class="instructions">
        <h2>Instructions</h2>
        <p>Welcome to the Penny War Tracker! Follow these steps to track your teams' progress:</p>
        <ol>
            <li><strong>Add a Team:</strong> Enter a team name and select a color for the team. Click "Add Team" to create the team.</li>
            <li><strong>Enter Coins and Bills:</strong> Select a team from the dropdown menu, select a date range (start and end date), and enter the number of pennies, nickels, dimes, quarters, and dollar bills collected. Click "Add Points" to update the team's score.</li>
            <li><strong>Leaderboard:</strong> The leaderboard below displays each team's current points, with color-coded names for easy identification.</li>
            <li><strong>Reset Data:</strong> If you need to start over, click "Reset Data" to clear all teams and points (use with caution).</li>
        </ol>
        <p>Note: Points are calculated as follows - Pennies add points, while nickels, dimes, quarters, and dollar bills subtract points.</p>
    </div>

    <div class="team-entry">
        <h2>Add Team</h2>
        <label for="teamName">Team Name:</label>
        <input type="text" id="teamName" placeholder="Enter team name">
        <label for="teamColor">Team Color:</label>
        <input type="color" id="teamColor" value="#3498db">
        <button onclick="addTeam()">Add Team</button>
    </div>
    <div class="coin-entry">
        <h2>Enter Coins/Bills</h2>
        <label for="selectTeam">Select Team:</label>
        <select id="selectTeam"></select>
        <label for="startDate">Start Date:</label>
        <input type="date" id="startDate">
        <label for="endDate">End Date:</label>
        <input type="date" id="endDate">
        <label for="pennies">Pennies:</label>
        <input type="number" id="pennies" placeholder="Number of pennies" value="0">
        <label for="nickels">Nickels:</label>
        <input type="number" id="nickels" placeholder="Number of nickels" value="0">
        <label for="dimes">Dimes:</label>
        <input type="number" id="dimes" placeholder="Number of dimes" value="0">
        <label for="quarters">Quarters:</label>
        <input type="number" id="quarters" placeholder="Number of quarters" value="0">
        <label for="dollars">Dollar Bills:</label>
        <input type="number" id="dollars" placeholder="Number of dollar bills" value="0">
        <button onclick="addPoints()">Add Points</button>
        <button onclick="resetData()">Reset Data</button>
    </div>
    <table>
        <thead>
            <tr>
                <th>Team</th>
                <th>Points</th>
            </tr>
        </thead>
        <tbody id="leaderboard">
        </tbody>
    </table>

    <script>
        // Load existing data from localStorage
        let teams = JSON.parse(localStorage.getItem('pennyWarTeams')) || {};

        function addTeam() {
            const teamName = document.getElementById('teamName').value.trim();
            const teamColor = document.getElementById('teamColor').value;

            if (!teamName) {
                alert('Please enter a valid team name.');
                return;
            }

            if (!teams[teamName]) {
                teams[teamName] = { points: 0, color: teamColor, history: [] };
                updateTeamSelect();
                saveData();
                updateLeaderboard();
            } else {
                alert('Team already exists!');
            }

            document.getElementById('teamName').value = '';
        }

        function addPoints() {
            const teamName = document.getElementById('selectTeam').value;
            if (!teamName || !teams[teamName]) {
                alert('Please select a valid team.');
                return;
            }

            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            if (!startDate || !endDate) {
                alert('Please select a valid date range.');
                return;
            }

            const pennies = parseInt(document.getElementById('pennies').value) || 0;
            const nickels = parseInt(document.getElementById('nickels').value) || 0;
            const dimes = parseInt(document.getElementById('dimes').value) || 0;
            const quarters = parseInt(document.getElementById('quarters').value) || 0;
            const dollars = parseInt(document.getElementById('dollars').value) || 0;

            const points = pennies - (nickels * 5 + dimes * 10 + quarters * 25 + dollars * 100);
            teams[teamName].points += points;

            // Store the entry in history
            teams[teamName].history.push({ startDate, endDate, points });

            saveData();
            updateLeaderboard();
        }

        function updateLeaderboard() {
            const leaderboard = document.getElementById('leaderboard');
            leaderboard.innerHTML = '';

            const sortedTeams = Object.entries(teams).sort((a, b) => b[1].points - a[1].points);

            for (const [team, data] of sortedTeams) {
                const row = document.createElement('tr');
                const teamCell = document.createElement('td');
                const pointsCell = document.createElement('td');

                teamCell.textContent = team;
                teamCell.style.color = data.color;
                pointsCell.textContent = data.points;

                row.appendChild(teamCell);
                row.appendChild(pointsCell);
                leaderboard.appendChild(row);
            }
        }

        function updateTeamSelect() {
            const selectTeam = document.getElementById('selectTeam');
            selectTeam.innerHTML = '';

            for (const team in teams) {
                const option = document.createElement('option');
                option.value = team;
                option.textContent = team;
                selectTeam.appendChild(option);
            }
        }

        function saveData() {
            localStorage.setItem('pennyWarTeams', JSON.stringify(teams));
        }

        function resetData() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                teams = {};
                saveData();
                updateLeaderboard();
                updateTeamSelect();
            }
        }

        // Initial load
        updateLeaderboard();
        updateTeamSelect();
    </script>
</body>
</html>
